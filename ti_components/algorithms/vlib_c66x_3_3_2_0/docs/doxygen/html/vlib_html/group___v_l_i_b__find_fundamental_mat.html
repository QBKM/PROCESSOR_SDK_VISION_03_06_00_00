<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>VLIB: VLIB_findFundamentalMat</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="tilogo.gif"></a></td>
  <td bgcolor="red"><img src="titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>VLIB_findFundamentalMat</h1><hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_l_i_b__find_fundamental_mat.html#geb6ae0c2e02330f5dedd2578ee656606">VLIB_findFundamentalMat</a> (VLIB_F32 pts1r[restrict], VLIB_F32 pts2r[restrict], int16_t numfeatures, VLIB_F32 distThreshold, VLIB_F32 degenThreshold, int32_t numItr4RANSAC, int32_t method, VLIB_F32 fFinal[restrict], int16_t *numInliers, uint8_t *inOrOutLier, uint8_t *scratch1, uint8_t *scratch2, uint8_t *scratch3)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="geb6ae0c2e02330f5dedd2578ee656606"></a><!-- doxytag: member="c66/VLIB_findFundamentalMat.h::VLIB_findFundamentalMat" ref="geb6ae0c2e02330f5dedd2578ee656606" args="(VLIB_F32 pts1r[restrict], VLIB_F32 pts2r[restrict], int16_t numfeatures, VLIB_F32 distThreshold, VLIB_F32 degenThreshold, int32_t numItr4RANSAC, int32_t method, VLIB_F32 fFinal[restrict], int16_t *numInliers, uint8_t *inOrOutLier, uint8_t *scratch1, uint8_t *scratch2, uint8_t *scratch3)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t VLIB_findFundamentalMat           </td>
          <td>(</td>
          <td class="paramtype">VLIB_F32&nbsp;</td>
          <td class="paramname"> <em>pts1r</em>[restrict], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VLIB_F32&nbsp;</td>
          <td class="paramname"> <em>pts2r</em>[restrict], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&nbsp;</td>
          <td class="paramname"> <em>numfeatures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VLIB_F32&nbsp;</td>
          <td class="paramname"> <em>distThreshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VLIB_F32&nbsp;</td>
          <td class="paramname"> <em>degenThreshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>numItr4RANSAC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VLIB_F32&nbsp;</td>
          <td class="paramname"> <em>fFinal</em>[restrict], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&nbsp;</td>
          <td class="paramname"> <em>numInliers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>inOrOutLier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>scratch1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>scratch2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>scratch3</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b>Description:</b></dt><dd>This API finds the fundamental matrix, utilizing the list of matched feature points. This method is based on 8 point algorithm of F matrix estimation along with RANSAC.</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pts1r</em>&nbsp;</td><td>: (x,y) packed key points locations list from one frame. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pts2r</em>&nbsp;</td><td>: (x,y) packed key points locations list from another frame. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>numfeatures</em>&nbsp;</td><td>: number of feature point in list <code>pts1r</code> &amp; <code>pts2r</code>. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>distThreshold</em>&nbsp;</td><td>: Threshold in terms of pixel distance from epipolar line to determine a feature point as inlier or out lier. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>degenThreshold</em>&nbsp;</td><td>: Threshold in terms of pixel distance between a point and the line formed by any other two points, to decided all these three points are co linear or not. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>numItr4RANSAC</em>&nbsp;</td><td>: Total number of RANSC iteration to be done. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>method</em>&nbsp;</td><td>: Bit field flag to choose a algorithm. Default value '7' </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>fFinal</em>&nbsp;</td><td>: Total Nine elements of F matrix as output </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>numInliers</em>&nbsp;</td><td>: Total number of inliers </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>inOrOutLier</em>&nbsp;</td><td>: Flag for each correspondence point, '1' indicates outlier, '0' indicates inlier. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>scratch1</em>&nbsp;</td><td>: Scratch memory of size 2520 bytes. This is mandatory scratch buffer. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>scratch2</em>&nbsp;</td><td>: Scratch memory of size 9* <code>numfeatures</code> bytes. Required only when RANSAC is enabled. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>scratch3</em>&nbsp;</td><td>: Scratch memory of size 52* <code>numfeatures</code> bytes. Required only when least square solution is requested.</td></tr>
  </table>
</dl>
<dl class="user" compact><dt><b>Assumptions:</b></dt><dd><ul>
<li>NA</li></ul>
</dd></dl>
<dl class="user" compact><dt><b>Implementation Notes:</b></dt><dd><ul>
<li>Output fundamental matrix <code>fFinal</code> satisfies pts2r<sup>T</sup> * fFinal * pts1r = 0.</li><li>Output <code>fFinal</code> is in row major form. fFinal[0],fFinal[1],fFinal[2] is the first row of fundamental matrix.</li><li>If <code>numItr4RANSAC</code> is set to 0x7FFFFFFF, then algorithm decides maximum number of iteration.</li><li>List <code>pts1</code>, <code>pts2</code> is one to one mapped. I.e. pts1[i] matching point is pts2[i].</li><li>Field <code>method</code> is bit packed information to algorithm.</li><li>In field <code>method</code>, if bit '0' is 1 then 8-Point algorithm is chosen, otherwise 7 point algorithm is chosen. Currently 7 point algorithm is not supported.</li><li>In field <code>method</code>, if bit '1' is 1 then RANSAC solution is found, otherwise single iteration is done. In RANSAC disabled case first 8 or 7 points from both list is chosen.</li><li>In field <code>method</code> if bit '2' is '1' then at last least square solution for all the input points is found.</li><li>In field <code>method</code> if bit '3' is '1' then rank (of 2) enforcement is done (by setting smallest eigen value to zero) on final solution otherwise it is not done.</li><li>In field <code>method</code> if bit '4' is '1' and bit '3' is '1' then along with setting smallest eigen value zero, other two eigen values are set to the average of those two non zero eigne values.</li><li>In field <code>method</code> if bit '5' is '1' then SVD is used for matrix solution otherwise reverse power iteration is used. Currently SVD based matrix solution is not supported.</li><li>Recommended value for <code>method</code> is 7.</li><li>If <code>degenThreshold</code> is provided as FLT_MAX then no degeneracy check is performed.</li><li><code>scratch1</code> in internal memory will improve the cycle consumption. </li></ul>
</dd></dl>

</div>
</div><p>
<hr size="1"><small>
Copyright  2018, Texas Instruments Incorporated</small>
</body>
</html>
