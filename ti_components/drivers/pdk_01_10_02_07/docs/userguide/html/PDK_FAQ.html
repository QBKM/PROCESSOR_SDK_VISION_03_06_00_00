<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>PDK/PDK FAQ - Texas Instruments Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="shortcut icon" href="favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://processors.wiki.ti.com/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="PDK_FAQ.html" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="http://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load.php@debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cmediawiki.skinning.interface%257Cmediawiki.ui.button%257Cskins.vector.styles&amp;only=styles&amp;skin=vector&amp;%252A.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load.php@debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;%252A.css" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: davincid_wikidb:resourceloader:filter:minify-css:7:70500b672b667d946e900b286b62c126 */</style>
<script src="load.php@debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;%252A"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"PDK/PDK_FAQ","wgTitle":"PDK/PDK FAQ","wgCurRevisionId":235934,"wgRevisionId":235934,"wgArticleId":45340,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["ADAS Processors","PDK","Pages with broken file links"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"PDK/PDK_FAQ","wgRelevantArticleId":45340,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"publish":false},"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":false,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: davincid_wikidb:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-PDK_PDK_FAQ skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

							<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p><br />
<span style="color:#ff0000"><b>Please note as of Wednesday, August 15th, 2018 this wiki has been set to read only. If you are a TI Employee and require Edit ability please contact x0211426 from the company directory.</b></span>
</p></div></div>
						<div class="mw-indicators">
</div>
			<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">PDK/PDK FAQ</span></h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Texas Instruments Wiki</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="PDK_FAQ.html#mw-head">navigation</a>, 					<a href="PDK_FAQ.html#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="hf-nsheader"><script language = "Javascript">
var tiContentGroup;
var tiwikicat = (typeof(mw.config.values.wgCategories[0]) === "undefined"? "":mw.config.values.wgCategories[0]);
tiContentGroup = "/DSP/wiki/Ext/" +tiwikicat;
var tiPageName;
tiPageName = 'wiki/PDK/PDK_FAQ';
</script></div><div class="hf-header"></div><div style="clear:both; margin:0; padding:0;"></div>
<div class="floatright"><a href="PDK_TDA_Software_Developer_Guide.html" title="PDK/PDK TDA Software Developer Guide"><img alt="Pdk tda home page.png" src="Pdk_tda_home_page.png" width="319" height="42" /></a></div>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="PDK_FAQ.html#Generic"><span class="tocnumber">1</span> <span class="toctext">Generic</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="PDK_FAQ.html#What_does_PDK_stand_for.3F"><span class="tocnumber">1.1</span> <span class="toctext">What does PDK stand for?</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="PDK_FAQ.html#What_do_I_get_with_PDK.2C_and_how_do_I_get_started.3F"><span class="tocnumber">1.2</span> <span class="toctext">What do I get with PDK, and how do I get started?</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="PDK_FAQ.html#How_do_I_maintain_my_changes_over_PDK.3F_How_to_pick_up_the_latest_bug_fixes_from_a_newer_PDK_release.3F"><span class="tocnumber">1.3</span> <span class="toctext">How do I maintain my changes over PDK? How to pick up the latest bug fixes from a newer PDK release?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="PDK_FAQ.html#Board_Porting"><span class="tocnumber">2</span> <span class="toctext">Board Porting</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="PDK_FAQ.html#How_to_change_UART_instance_in_VSDK_and_PDK.3F"><span class="tocnumber">2.1</span> <span class="toctext">How to change UART instance in VSDK and PDK?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="PDK_FAQ.html#Build"><span class="tocnumber">3</span> <span class="toctext">Build</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="PDK_FAQ.html#Can_I_build_PDK_on_a_Linux_machine.3F"><span class="tocnumber">3.1</span> <span class="toctext">Can I build PDK on a Linux machine?</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="PDK_FAQ.html#How_do_I_build_PDK_library_for_a_particular_Platform.3F"><span class="tocnumber">3.2</span> <span class="toctext">How do I build PDK library for a particular Platform?</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="PDK_FAQ.html#Can_I_selective_build_VIP_driver_only_without_DSS_and_VPE_drivers.3F"><span class="tocnumber">3.3</span> <span class="toctext">Can I selective build VIP driver only without DSS and VPE drivers?</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="PDK_FAQ.html#How_can_I_build_PDK_examples_while_using_Processor_SDK_Vision_.28AKA_Vision_SDK.29.3F"><span class="tocnumber">3.4</span> <span class="toctext">How can I build PDK examples while using Processor SDK Vision (AKA Vision SDK)?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="PDK_FAQ.html#Secondary_Boot_loader"><span class="tocnumber">4</span> <span class="toctext">Secondary Boot loader</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="PDK_FAQ.html#How_to_get_time_stamp_before_a_core_is_started_by_SBL.3F"><span class="tocnumber">4.1</span> <span class="toctext">How to get time stamp before a core is started by SBL?</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="PDK_FAQ.html#What_are_some_of_the_common_mistake_done_while_using_QSPI_boot_mode.3F"><span class="tocnumber">4.2</span> <span class="toctext">What are some of the common mistake done while using QSPI boot mode?</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="PDK_FAQ.html#What_are_the_common_issues_faced_while_using_CCS_and_SBL_at_the_same_time_for_development.3F"><span class="tocnumber">4.3</span> <span class="toctext">What are the common issues faced while using CCS and SBL at the same time for development?</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="PDK_FAQ.html#How_to_change_I2C_setting_for_adapting_to_custom_PMIC_in_the_SBL.3F"><span class="tocnumber">4.4</span> <span class="toctext">How to change I2C setting for adapting to custom PMIC in the SBL?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="PDK_FAQ.html#EDMA3LLD"><span class="tocnumber">5</span> <span class="toctext">EDMA3LLD</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="PDK_FAQ.html#How_to_fix_resource_allocation_failure.3F"><span class="tocnumber">5.1</span> <span class="toctext">How to fix resource allocation failure?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="PDK_FAQ.html#CAN_Controller.28DCAN.2FMCAN.29"><span class="tocnumber">6</span> <span class="toctext">CAN Controller(DCAN/MCAN)</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="PDK_FAQ.html#What_is_CAN.3F"><span class="tocnumber">6.1</span> <span class="toctext">What is CAN?</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="PDK_FAQ.html#How_is_bit-rate_calculated.3F"><span class="tocnumber">6.2</span> <span class="toctext">How is bit-rate calculated?</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="PDK_FAQ.html#What_is_sampling_point_and_how_is_it_calculated.3F"><span class="tocnumber">6.3</span> <span class="toctext">What is sampling point and how is it calculated?</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="PDK_FAQ.html#What_is_CAN_bus_termination.3F"><span class="tocnumber">6.4</span> <span class="toctext">What is CAN bus termination?</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="PDK_FAQ.html#What_is_Transceiver_Delay_Compensation_Value.28TDCV.29_and_how_is_it_calculated.3F"><span class="tocnumber">6.5</span> <span class="toctext">What is Transceiver Delay Compensation Value(TDCV) and how is it calculated?</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="PDK_FAQ.html#Things_to_consider.2Fcheck_before_sending_a_message_over_CAN_bus"><span class="tocnumber">6.6</span> <span class="toctext">Things to consider/check before sending a message over CAN bus</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="PDK_FAQ.html#CAN_communication_failed.2C_where_to_start_debug.3F"><span class="tocnumber">6.7</span> <span class="toctext">CAN communication failed, where to start debug?</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Generic">Generic</span></h2>
<h3><span class="mw-headline" id="What_does_PDK_stand_for.3F">What does PDK stand for?</span></h3>
<p>PDK stands for Platform Development Kit containing TI RTOS and baremetal drivers for various peripherals present in TI devices
</p>
<h3><span class="mw-headline" id="What_do_I_get_with_PDK.2C_and_how_do_I_get_started.3F">What do I get with PDK, and how do I get started?</span></h3>
<p>Each PDK release is available as a full source release including: 
</p>
<ul><li>Complete source code for all drivers, with associated build system </li>
<li>Sample applications and unit test applications demonstrating the usage of all modules</li>
<li>Release documents: Release Notes, User Guide</li></ul>
<p>To get started with PDK, you can refer to the release documents mentioned in the release notes in the <code>docs</code> folder of the product. Refer to <a href="PDK_TDA_Software_Developer_Guide.html" title="PDK/PDK TDA Software Developer Guide">PDK Userguide</a> for high level information.  The doxygen API documentation present in <code>docs</code> folder provides details on the APIs, and the sample examples provided with PDK demonstrate usage of the APIs. The sample application is present in <code>examples</code> folder of each of the components within PDK.
</p>
<h3><span class="mw-headline" id="How_do_I_maintain_my_changes_over_PDK.3F_How_to_pick_up_the_latest_bug_fixes_from_a_newer_PDK_release.3F">How do I maintain my changes over PDK? How to pick up the latest bug fixes from a newer PDK release?</span></h3>
<p>Kindly refer to <a rel="nofollow" class="external free" href="Maitaining_Custom_Changes_Over_TI_Software_Release.html">http://processors.wiki.ti.com/index.php/PDK/Maitaining_Custom_Changes_Over_TI_Software_Release</a>. This covers:
</p>
<ol><li> How to maintain custom changes over a TI software release</li>
<li>If in case you need to migrate to a different version of the same TI Software</li>
<li> How to take in Bug fixes from the latest and greatest TI Software release without really having to migrate to the latest version. (Note: This is available from the PDK 01.09.XX.XX version)</li></ol>
<p><br />
</p>
<h2><span class="mw-headline" id="Board_Porting">Board Porting</span></h2>
<h3><span class="mw-headline" id="How_to_change_UART_instance_in_VSDK_and_PDK.3F">How to change UART instance in VSDK and PDK?</span></h3>
<p>Change the UART1 pinmux setting in function BSP platform file as per your platform. For example for TDA2xx, change in Bsp_platformTda2xxSetPinMux() in file ti_components/drivers/pdk_&lt;VERSION&gt;/packages/ti/drv/vps/src/platforms/src/bsp_platformTda2xx.c per the UART pin that is needed. Below is an example to change to UART3
</p><p><br />
</p>
<pre>Bsp_platformSetPinmuxRegs((UInt32) 0, (UInt32) CTRL_CORE_PAD_UART3_TXD,
                         BSP_PLATFORM_IOPAD_CFG_INPUTENABLE_OUT |
                         BSP_PLATFORM_IOPAD_CFG_PULLUDENABLE_ENABLE |
                         BSP_PLATFORM_IOPAD_CFG_PULLTYPESELECT_UP);
Bsp_platformSetPinmuxRegs((UInt32) 0, (UInt32) CTRL_CORE_PAD_UART3_RXD,
                         BSP_PLATFORM_IOPAD_CFG_INPUTENABLE_BI |
                         BSP_PLATFORM_IOPAD_CFG_PULLUDENABLE_DISABLE |
                         BSP_PLATFORM_IOPAD_CFG_PULLTYPESELECT_DOWN);
</pre>
<p><br />
</p><p>In case of VSDK application, change the UART driver create in VSDK to point to the required UART instance in file vision_sdk\links_fw\src\rtos\utils_common\src\utils_uart.c in fxn System_uartInit()
</p><p>In case of PDK application, do the similar change in ti_components/drivers/pdk_&lt;VERSION&gt;/packages/ti/drv/vps/examples/utility/src/bsputils_uart.c<br />
Similar query can be found in the E2E forum <a rel="nofollow" class="external free" href="https://e2e.ti.com/support/arm/automotive_processors/f/1021/p/665277/2446737">https://e2e.ti.com/support/arm/automotive_processors/f/1021/p/665277/2446737</a>
</p>
<h2><span class="mw-headline" id="Build">Build</span></h2>
<h3><span class="mw-headline" id="Can_I_build_PDK_on_a_Linux_machine.3F">Can I build PDK on a Linux machine?</span></h3>
<p>Yes. PDK build is based on makefiles. Edit the <code>pdk/packages/ti/build/Rules.make</code> file under <code>#Paths for linux machine</code> section to point to the tools path. Then give the following command from prompt<br />
</p>
<pre>make -s all
</pre>
<p>Notes: "-j" option is also support by make. One could use this to do parallel build and speed up the build time.
</p>
<h3><span class="mw-headline" id="How_do_I_build_PDK_library_for_a_particular_Platform.3F">How do I build PDK library for a particular Platform?</span></h3>
<p>The build platform can be provided through command line which is illustrated below<br />
</p>
<pre>make -s all BOARD=tda2xx-evm
</pre>
<p>The supported platforms are given in the top level <code>pdk/packages/ti/build/makefile</code>.
</p>
<h3><span class="mw-headline" id="Can_I_selective_build_VIP_driver_only_without_DSS_and_VPE_drivers.3F">Can I selective build VIP driver only without DSS and VPE drivers?</span></h3>
<p>Yes. It is possible to build only VIP or only DSS or only VPE or any two combination of above three so that other drivers are compiled out resulting in reduction in memory. <br />
The following command could be used<br />
For VIP only build: 
</p>
<pre>make -s pdk_libs PACKAGE_SELECT=vps-vip-only
</pre>
<p>For DSS only build: 
</p>
<pre>make -s pdk_libs PACKAGE_SELECT=vps-dss-only
</pre>
<p>For VPE only build: 
</p>
<pre>make -s pdk_libs PACKAGE_SELECT=vps-vpe-only
</pre>
<h3><span class="mw-headline" id="How_can_I_build_PDK_examples_while_using_Processor_SDK_Vision_.28AKA_Vision_SDK.29.3F">How can I build PDK examples while using Processor SDK Vision (AKA Vision SDK)?</span></h3>
<p>PDK's build folder is different from the build folder of Vision SDK. In order to build PDK examples change the current directory to &lt;vsdk_version&gt;/ti_components/drivers/&lt;pdk_version&gt;/packages/ti/build. Modify paths for tool chains and PDK_INSTALL_PATH appropriately.
The following command could be used to build examples:<br /> 
</p>
<pre>make -s examples
</pre>
<p>For more details on build commands, refer to <a rel="nofollow" class="external free" href="PDK_TDA_Building_The_Package.html">http://processors.wiki.ti.com/index.php/PDK/PDK_TDA_Building_The_Package</a>
</p><p><br />
</p>
<h2><span class="mw-headline" id="Secondary_Boot_loader">Secondary Boot loader</span></h2>
<h3><span class="mw-headline" id="How_to_get_time_stamp_before_a_core_is_started_by_SBL.3F">How to get time stamp before a core is started by SBL?</span></h3>
<p>TDA SoCs have 32K Timer which is clocked by the 32-KHz system clock. The same counter can be read by calling the API SBLUtilsRead32KTimer(). User can use this API to get the time stamp before the core boot up in SBL. User can refer to TDA2xx SBL (<code>pdk/packages/ti/boot/sbl_auto/sbl_app/src/tda2xx/sbl_tda2xx_main.c</code>) to see how 32K timer is used to get the time stamp before IPU1_0 is started by SBL.
</p>
<h3><span class="mw-headline" id="What_are_some_of_the_common_mistake_done_while_using_QSPI_boot_mode.3F">What are some of the common mistake done while using QSPI boot mode?</span></h3>
<p>There is one common issue with flashing and booting SBL in QSPI boot mode:
Flashwriter will leave QSPI flash in either QSPI-1 or QSPI-4 mode after completion depending on user selection at the time of flashing. User has to make sure SYSBOOT setting is set to use the corresponding QSPI-1 or QSPI-4 boot mode otherwise SBL won’t come up.
</p><p><br />
</p>
<h3><span class="mw-headline" id="What_are_the_common_issues_faced_while_using_CCS_and_SBL_at_the_same_time_for_development.3F">What are the common issues faced while using CCS and SBL at the same time for development?</span></h3>
<p>1. Ideally when the user wants to load SBL using debugger gel files should not be present in the target configuration.
In case gel files are present and SBL is loaded using debugger it might initialize the IPU's AMMU in such a way that it clashes with gel file configuration which leads to exceptions. To avoid this gel files should be modified to have same AMMU configuration as SBL. Same is applicable for EVE MMU.<br />
2. Many times the dip switches i.e. SYSBOOT is set in a way where some pre-flashed SBL boots. This can be avoided by setting SYSBOOT to a reserved/debug boot mode. Please refer to SBL user guide for DIP switch settings for debug boot mode.
</p><p><br />
</p>
<h3><span class="mw-headline" id="How_to_change_I2C_setting_for_adapting_to_custom_PMIC_in_the_SBL.3F">How to change I2C setting for adapting to custom PMIC in the SBL?</span></h3>
<p>User needs to define the new PMIC Voltage regulator table for the custom PMIC. E.g. gJ6Eco17x17LP8733RegulatorTable is defined in <code>pdk/packages/ti/boot/sbl_auto/sbl_utils/src/tda2xx/sbl_utils_tda2xx.c</code>. Also care should be taken care that the corresponding I2C instance is enabled by PRCM while doing I2C initialization. For more details refer to section 3.2 "Taking Care of Differences in Device Voltage Rail and PMIC Integration" of <a rel="nofollow" class="external free" href="http://www.ti.com/lit/an/sprac22/sprac22.pdf">http://www.ti.com/lit/an/sprac22/sprac22.pdf</a>.
</p>
<h2><span class="mw-headline" id="EDMA3LLD">EDMA3LLD</span></h2>
<h3><span class="mw-headline" id="How_to_fix_resource_allocation_failure.3F">How to fix resource allocation failure?</span></h3>
<p>The EDMA resources like DMA Channels, PaRAMs, QDMA Channels are shared between applications running on all cores. So in EDMA3LLD the resources are statically allocated to of the each cores.
The "EDMA3_DRV_open" function takes a parameter of type "EDMA3_DRV_InstanceInitConfig", which specifies the resources owned by the core.
Please check the bit corresponding to the resource no is set.
Ex to allocate the DMA channel number 5, make sure the bit 5 in EDMA3_DRV_InstanceInitConfig-&gt;ownDmaChannels[0] is set.
</p><p>In case of Vision SDK the EDMA resources are partitioned in files present in "vision_sdk\links_fw\src\rtos\utils_common\src\dma_cfg"
</p>
<h2><span class="mw-headline" id="CAN_Controller.28DCAN.2FMCAN.29">CAN Controller(DCAN/MCAN)</span></h2>
<h3><span class="mw-headline" id="What_is_CAN.3F">What is CAN?</span></h3>
<p>CAN is:<br />
1. a multi-master broadcast serial bus standard for connecting electronic control unit <br />
2. a serial asynchronous bus protocol, message-based protocol designed automotive applications but also used for industrial applications.<br />
3. a differential pair signal and could be twisted without issue.<br />
<br />
</p>
<h3><span class="mw-headline" id="How_is_bit-rate_calculated.3F">How is bit-rate calculated?</span></h3>
<p>Formula for bit-rate is:<br />
</p>
<pre>   bit rate(bits per second) = (CAN clock in Hz) / BRP / (1 + TSEG1 + TSEG2)<br />
   where: CAN clock is functional clock of CAN module<br />
          BRP: Bit rate pre-scalar value<br />
          TSEG1, TSEG2: Time segments used to define sampling point for the bit.<br />
</pre>
<p><br />
</p>
<h3><span class="mw-headline" id="What_is_sampling_point_and_how_is_it_calculated.3F">What is sampling point and how is it calculated?</span></h3>
<p>Sampling point is the point of time at which the bus level is read and interpreted as the value at that respective time. Typical value of sampling point is between 75-90%.<br />
Sampling point is calculated as:<br />
</p>
<pre>   Sampling Point(%) = (1 + TSEG1) / (1 + TSEG1 + TSEG2)<br />
   TSEG1, TSEG2: Time Segments expressed in terms of number of T<sub>q</sub>(Time Quantum)<br />
   T<sub>q</sub>: the period of the CAN module functional clock.<br />
</pre>
<p><br />
</p>
<h3><span class="mw-headline" id="What_is_CAN_bus_termination.3F">What is CAN bus termination?</span></h3>
<p>CAN bus termination is needed to minimize the reflection , to reduce the noise. The transmission lines must be terminated to make sure noise does not cause communication failure.<br />
There are two types of CAN termination:<br />
<b>1. Standard termination</b>:<br />
The traditional 120 Ohm resistor(R<sub>L</sub>) is used on each end of the bus as shown in the following figure.<br />
</p>
<div class="floatleft"><a href="http://processors.wiki.ti.com/index.php/File:Standard_CAN_Bus_Termination.PNG" class="image"><img alt="Standard CAN Bus Termination.PNG" src="Standard_CAN_Bus_Termination.PNG" width="120" height="103" /></a></div><br />
<p><br />
<br />
<br />
<br />
<b>2. Split Termination</b><br />
Two 60 Ohm(R<sub>L</sub>/2) resistors along with capacitor(C<sub>L</sub>) is used to suppress the noise at both ends of the bus. Typical value of C<sub>L</sub> for 1.1 Mbps is 4.7 nF. It is  shown in the following figure<br />
</p>
<div class="floatleft"><a href="http://processors.wiki.ti.com/index.php/File:Split_CAN_Bus_Termination.PNG" class="image"><img alt="Split CAN Bus Termination.PNG" src="Split_CAN_Bus_Termination.PNG" width="250" height="144" /></a></div><br />
<p><br />
<br />
<br />
<br />
<br />
<br />
<b>NOTE</b>: R<sub>L</sub> and C<sub>L</sub> values are dependent on a signaling rate.<br />
<br />
</p>
<h3><span class="mw-headline" id="What_is_Transceiver_Delay_Compensation_Value.28TDCV.29_and_how_is_it_calculated.3F">What is Transceiver Delay Compensation Value(TDCV) and how is it calculated?</span></h3>
<p>CAN is a broadcast protocol, every node on the bus sees the message on the bus even if it is Tx node. Tx node uses this data on Rx line for integrity and error checks locally.<br />
Overview of bit flow through different stages in communication is:<br />
<code>CAN module core → CAN module Tx line → SoC Tx Pin/PAD → Transceiver Out → CAN Bus → Transceiver In → SoC Rx Pin/PAD → CAN module Rx line → CAN module core</code><br />
Above whole path introduces latency between data going out from Tx line to data coming in on Rx line. Major part of this latency comes from Transceiver. Hence it is called Transceiver Delay Compensation Value.<br />
This needs to programmed as controller has to adjust it Secondary Sampling Point(SSP) for sampling Rx line at the correct time.<br />
</p>
<ul><li>MCAN provides functionality to measure delay between transition on Tx line and same transition for Rx line. User need not to measure transceiver loop-back delay or refer transceiver documentation for the same. User just needs to program SSP position which could same as Sampling Point(SP).<br /></li></ul>
<p><br />
</p>
<h3><span class="mw-headline" id="Things_to_consider.2Fcheck_before_sending_a_message_over_CAN_bus">Things to consider/check before sending a message over CAN bus</span></h3>
<p>Make sure following is done/checked before attempting communication on bus:<br />
1. ISO-11898 compatible transceivers have to be connected to a CAN bus.<br />
2. CAN bus should have proper termination.<br />
3. CAN_L lines from nodes shall be connected together and same goes for CAN_H and GND lines as well.<br />
4. Make sure all connections are firm and all pins properly connected.<br />
5. All node on the bus are configured for same bit rate.<br />
6. In case of CAN FD, make sure Transceiver Delay Compensation value is correctly programmed.<br />
7. CAN module is powered up and configured properly.<br />
8. SoC pins/PADs for CAN are configured properly.<br />
<br />
</p>
<h3><span class="mw-headline" id="CAN_communication_failed.2C_where_to_start_debug.3F">CAN communication failed, where to start debug?</span></h3>
<p>When any CAN message transmission/reception fails, controller updates LEC(Last Error Code) and DLEC(Data Phase Last Error Code) fields in status register('MCAN_PSR' in case of MCAN and 'DCAN_ES' in case of DCAN).<br />
<b>LEC:</b> this field is updated when error happened in arbitration phase in case of CAN FD message or during full message for classic CAN message.<br />
<b>DLEC:</b> this field is updated when error happened in data phase in case of CAN FD message.<br />
LEC/DLEC fields have following errors:<br />
<b>1. Stuff Error</b>
</p>
<ul><li> <i>Node type:</i> Rx<br /></li>
<li> <i>Description:</i> More than 5 equal bits in a sequence have occurred in a part of a received message where this is not allowed.<br /></li>
<li> Check if all the nodes on the bus have same bit-rate.<br /></li></ul>
<p><b>2. Form Error</b><br />
</p>
<ul><li> <i>Node type:</i> Rx<br /></li>
<li> <i>Description:</i> A fixed format part of a received frame has the wrong format.<br /></li>
<li> This could happen if receiver node have drift in CAN functional clock momentarily or bus have interference.<br /></li></ul>
<p><b>3. AckError</b><br />
</p>
<ul><li> <i>Node Type:</i> Tx<br /></li>
<li> <i>Description:</i> The message transmitted by the MCAN module was not acknowledged by another node.<br /></li>
<li> CAN bus should have more than one nodes(apart for transmitting node) up and running(not in sleep or power down state).<br /></li></ul>
<p><b>4. Bit1Error and Bit0Error</b><br />
</p>
<ul><li> <i>Node Type:</i> Tx<br /></li>
<li> <i>Description:</i><br /></li>
<li> <i>Bit1Error:</i> During the transmission of a message (with the exception of the arbitration field), the device wanted to send a recessive level (bit of logical value 1), but the monitored bus value was dominant.<br /></li>
<li> <i>Bit0Error:</i> During the transmission of a message (or acknowledge bit, or active error flag, or overload flag), the device wanted to send a dominant level (data or identifier bit logical value 0), but the monitored bus value was recessive.<br /></li>
<li> Tx and Rx lines are sampled at Sampling Point(SP) and Secondary Sampling Point(SSP) respectively have different values. Position of SSP is configurable.<br /></li>
<li> This can happen in following cases:<br />
<ul><li> <i>For LEC:</i><br />
<ul><li> If configured SP is too large for given node.<br /></li>
<li> Segment after SP(TSEG2) should be large enough to compensate for Transceiver Delay.</li></ul></li>
<li> <i>For DLEC:</i><br />
<ul><li> Configured Transceiver Delay Compensation value is less/more than required.<br /></li></ul></li></ul></li></ul>
<p><b>2. CRCError</b><br />
</p>
<ul><li> <i>Node type:</i> Rx<br /></li>
<li> <i>Description:</i> The CRC check sum of a received message was incorrect. The CRC of an incoming message does not match with the CRC calculated from the received data.<br /></li>
<li> This could happen if receiver node have drift in CAN functional clock momentarily or bus have interference.<br /></li></ul>
<p><br />
</p>
<!-- 
NewPP limit report
CPU time usage: 0.120 seconds
Real time usage: 0.157 seconds
Preprocessor visited node count: 194/1000000
Preprocessor generated node count: 298/1000000
Post‐expand include size: 243/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   19.563      1 - -total
100.00%   19.563      1 - Template:Return_to_PDK_TDA_Home_Page
 50.28%    9.836      1 - Template:Clr
-->

<!-- Saved in parser cache with key davincid_wikidb:pcache:idhash:45340-0!*!0!!en!5!* and timestamp 20190103151858 and revision id 235934
 -->
<div class="hf-footer"></div><div class="hf-nsfooter"><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="http://processors.wiki.ti.com/index.php/File:E2e.jpg" class="image"><img alt="E2e.jpg" src="E2e.jpg" width="305" height="63" /></a>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external free" href="http://e2e.ti.com">http://e2e.ti.com</a>. Please post only comments about the article <b>PDK/PDK FAQ</b> here.</i>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"> <a href="http://processors.wiki.ti.com/index.php/File:Hyperlink_blue.png" class="image"><img alt="Hyperlink blue.png" src="Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li> <a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li> <a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li> <a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li> <a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br />
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<p><!-- HitBox Sub accounts Code START -->
<script language="JavaScript" src="http://focus.ti.com/js/shared/metrics/metrics-min.js?version=1" type="text/javascript"></script>
<!-- HitBox Sub accounts Code END -->
</p>
<div id="tiPrivacy"></div>
</div></div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="http://processors.wiki.ti.com/index.php?title=PDK/PDK_FAQ&amp;oldid=235934">http://processors.wiki.ti.com/index.php?title=PDK/PDK_FAQ&amp;oldid=235934</a>"					</div>
													<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="http://processors.wiki.ti.com/index.php/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="http://processors.wiki.ti.com/index.php/Category:ADAS_Processors" title="Category:ADAS Processors">ADAS Processors</a></li><li><a href="http://processors.wiki.ti.com/index.php/Category:PDK" title="Category:PDK">PDK</a></li><li><a href="http://processors.wiki.ti.com/index.php?title=Category:Pages_with_broken_file_links&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages with broken file links (page does not exist)">Pages with broken file links</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="http://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=PDK%2FPDK+FAQ" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="http://processors.wiki.ti.com/index.php/Special:RequestAccount" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="PDK_FAQ.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
															<li  id="ca-talk" class="new"><span><a href="http://processors.wiki.ti.com/index.php?title=Talk:PDK/PDK_FAQ&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span>Variants</span><a href="PDK_FAQ.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="PDK_FAQ.html" >Read</a></span></li>
															<li id="ca-viewsource"><span><a href="http://processors.wiki.ti.com/index.php?title=PDK/PDK_FAQ&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="http://processors.wiki.ti.com/index.php?title=PDK/PDK_FAQ&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="PDK_FAQ.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="http://processors.wiki.ti.com/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="http://processors.wiki.ti.com/index.php/Main_Page"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
			<h3 id='p-navigation-label'>Navigation</h3>

			<div class="body">
									<ul>
													<li id="n-mainpage"><a href="http://processors.wiki.ti.com/index.php/Main_Page" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
													<li id="n-All-pages"><a href="http://processors.wiki.ti.com/index.php/Special:AllPages">All pages</a></li>
													<li id="n-All-categories"><a href="http://processors.wiki.ti.com/index.php/Special:Categories">All categories</a></li>
													<li id="n-recentchanges"><a href="http://processors.wiki.ti.com/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
													<li id="n-randompage"><a href="http://processors.wiki.ti.com/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
													<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-coll-print_export' aria-labelledby='p-coll-print_export-label'>
			<h3 id='p-coll-print_export-label'>Print/export</h3>

			<div class="body">
									<ul>
													<li id="coll-create_a_book"><a href="http://processors.wiki.ti.com/index.php?title=Special:Book&amp;bookcmd=book_creator&amp;referer=PDK%2FPDK+FAQ">Create a book</a></li>
													<li id="coll-download-as-rl"><a href="http://processors.wiki.ti.com/index.php?title=Special:Book&amp;bookcmd=render_article&amp;arttitle=PDK%2FPDK+FAQ&amp;oldid=235934&amp;writer=rl">Download as PDF</a></li>
													<li id="t-print"><a href="http://processors.wiki.ti.com/index.php?title=PDK/PDK_FAQ&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Toolbox</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="http://processors.wiki.ti.com/index.php/Special:WhatLinksHere/PDK/PDK_FAQ" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="http://processors.wiki.ti.com/index.php/Special:RecentChangesLinked/PDK/PDK_FAQ" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-specialpages"><a href="http://processors.wiki.ti.com/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-permalink"><a href="http://processors.wiki.ti.com/index.php?title=PDK/PDK_FAQ&amp;oldid=235934" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="http://processors.wiki.ti.com/index.php?title=PDK/PDK_FAQ&amp;action=info" title="More information about this page">Page information</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 26 November 2018, at 04:52.</li>
											<li id="footer-info-viewcount">This page has been accessed 3,358 times.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="http://processors.wiki.ti.com/index.php/Project:Privacy_policy" title="Project:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="http://processors.wiki.ti.com/index.php/Project:About" title="Project:About">About Texas Instruments Wiki</a></li>
											<li id="footer-places-disclaimer"><a href="http://processors.wiki.ti.com/index.php/Project:General_disclaimer" title="Project:General disclaimer">Disclaimers</a></li>
											<li id="footer-places-termsofservice"><a href="http://processors.wiki.ti.com/index.php/Project:Terms_of_Service" title="Project:Terms of Service">Terms of Use</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31" /></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="http://www.mediawiki.org/"><img src="poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"http://processors.wiki.ti.com/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":695});
}</script>
	</body>
</html>
