<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>M2M API</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="../tilogo.gif"></a></td>
  <td bgcolor="red"><img src="../titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.9 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">M2M API<div class="ingroups"><a class="el" href="group___b_s_p___d_r_v___v_p_s___a_p_i.html">VPS Driver API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___b_s_p___d_r_v___v_p_s___m2_m___v_p_e___a_p_i"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___v_p_s___m2_m___v_p_e___a_p_i.html">M2M VPE API</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:vps__m2m_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vps__m2m_8h.html">vps_m2m.h</a></td></tr>
<tr class="memdesc:vps__m2m_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface generic memory to memory driver. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_vps___m2m_create_params.html">Vps_M2mCreateParams</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">M2M create parameter structure to be passed to the driver at the time of mem to mem driver create call.  <a href="struct_vps___m2m_create_params.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_vps___m2m_create_status.html">Vps_M2mCreateStatus</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create status for the M2M create call. This should be passed to the create function as a create status argument while creating the driver.  <a href="struct_vps___m2m_create_status.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga6e1b254a0c2933423d199181f5f045db"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6e1b254a0c2933423d199181f5f045db"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___v_p_s___m2_m___a_p_i.html#ga6e1b254a0c2933423d199181f5f045db">VPS_M2M_MAX_HANDLE_PER_INST</a>&#160;&#160;&#160;(16U)</td></tr>
<tr class="memdesc:ga6e1b254a0c2933423d199181f5f045db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of handles supported by M2M driver per driver instance. Note: This is a read only macro. Don't modify the value of this macro. <br /></td></tr>
<tr class="separator:ga6e1b254a0c2933423d199181f5f045db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96e9eccd1205c9536cc716906007d3d4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga96e9eccd1205c9536cc716906007d3d4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___v_p_s___m2_m___a_p_i.html#ga96e9eccd1205c9536cc716906007d3d4">VPS_M2M_MAX_CH_PER_INST</a>&#160;&#160;&#160;(40U)</td></tr>
<tr class="memdesc:ga96e9eccd1205c9536cc716906007d3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of channels that could be allocated per instance. This macro is used in allocation of memory pool objects and is assumed that if more that one handle is opened per instance, then the channel memory will be shared across handles. Note: This is a read only macro. Don't modify the value of this macro. <br /></td></tr>
<tr class="separator:ga96e9eccd1205c9536cc716906007d3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga36b508e1f5d71ef130d2d681d1440241"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga36b508e1f5d71ef130d2d681d1440241"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___v_p_s___m2_m___a_p_i.html#ga36b508e1f5d71ef130d2d681d1440241">VPS_M2M_MAX_CH_PER_HANDLE</a>&#160;&#160;&#160;(20U)</td></tr>
<tr class="memdesc:ga36b508e1f5d71ef130d2d681d1440241"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of channels that could be allocated per handle. The total number of channels that could be allocated for all the handles for an instance should be less than VPS_M2M_MAX_CH_PER_INST. Note: This is a read only macro. Don't modify the value of this macro. <br /></td></tr>
<tr class="separator:ga36b508e1f5d71ef130d2d681d1440241"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac5a9813e588315dd0084b1364db63d8c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac5a9813e588315dd0084b1364db63d8c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___v_p_s___m2_m___a_p_i.html#gac5a9813e588315dd0084b1364db63d8c">VPS_M2M_DEF_QUEUE_LEN_PER_CH</a>&#160;&#160;&#160;(<a class="el" href="bsp__cfg_mem_8h.html#aae7bfa21f7dd928434fcf9d4190c0281">BSP_CFG_M2M_VPE_QUEUE_LEN_PER_CH</a>)</td></tr>
<tr class="memdesc:gac5a9813e588315dd0084b1364db63d8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default max number of frames that can be queued per channel. <br /></td></tr>
<tr class="separator:gac5a9813e588315dd0084b1364db63d8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58f49f4fc5699e2a0a1a1c332794148f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga58f49f4fc5699e2a0a1a1c332794148f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___v_p_s___m2_m___a_p_i.html#ga58f49f4fc5699e2a0a1a1c332794148f">VPS_M2M_VPE_IOCTL_BASE</a>&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gac898b29b93dafc793c744b2fc89fb204">VPS_M2M_IOCTL_BASE</a> + 0x0100U)</td></tr>
<tr class="memdesc:ga58f49f4fc5699e2a0a1a1c332794148f"><td class="mdescLeft">&#160;</td><td class="mdescRight">VPE M2M driver IOCTL base. <br /></td></tr>
<tr class="separator:ga58f49f4fc5699e2a0a1a1c332794148f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5feae5957cb145fcbce4d4c22ea2ce32"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5feae5957cb145fcbce4d4c22ea2ce32"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___v_p_s___m2_m___a_p_i.html#ga5feae5957cb145fcbce4d4c22ea2ce32">VPS_M2M_SCALER_ID_MAX</a>&#160;&#160;&#160;(1U)</td></tr>
<tr class="memdesc:ga5feae5957cb145fcbce4d4c22ea2ce32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of M2M scaler instances. <br /></td></tr>
<tr class="separator:ga5feae5957cb145fcbce4d4c22ea2ce32"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7fb579f1bce44f40a3ebe68fbc64b851"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___v_p_s___m2_m___a_p_i.html#ga7fb579f1bce44f40a3ebe68fbc64b851">VpsM2mCreateParams_init</a> (<a class="el" href="struct_vps___m2m_create_params.html">Vps_M2mCreateParams</a> *createPrms)</td></tr>
<tr class="memdesc:ga7fb579f1bce44f40a3ebe68fbc64b851"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="struct_vps___m2m_create_params.html" title="M2M create parameter structure to be passed to the driver at the time of mem to mem driver create cal...">Vps_M2mCreateParams</a> structure init function.  <a href="#ga7fb579f1bce44f40a3ebe68fbc64b851">More...</a><br /></td></tr>
<tr class="separator:ga7fb579f1bce44f40a3ebe68fbc64b851"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This modules define APIs to VPE memory to memory driver in VPS.</p>
<p>M2M VPE driver supports the following FVID2 APIs (see also <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html">FVID2 API</a>)</p>
<ul>
<li><b> Creating the driver </b> - <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#ga1b6ddf776c756c47b7a6adcda5d2dc29" title="Creates the driver identified by the driver ID. ">Fvid2_create()</a> <table  border="1">
<tr>
<th>Parameter </th><th>Value  </th></tr>
<tr>
<td>drvId </td><td><a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#ga689015968b928414a7761f5db1782d3c">FVID2_VPS_M2M_DRV</a>  </td></tr>
<tr>
<td>instanceId </td><td>In case of VPE, instance ID is <a class="el" href="group___b_s_p___d_r_v___v_p_s___m2_m___v_p_e___a_p_i.html#ga76284bc52b0b4369dfe3c34a9e987716">VPS_M2M_INST_VPE1</a>   </td></tr>
<tr>
<td>createArgs </td><td><a class="el" href="struct_vps___m2m_create_params.html" title="M2M create parameter structure to be passed to the driver at the time of mem to mem driver create cal...">Vps_M2mCreateParams</a> *   </td></tr>
<tr>
<td>createStatusArgs </td><td><a class="el" href="struct_vps___m2m_create_status.html" title="Create status for the M2M create call. This should be passed to the create function as a create statu...">Vps_M2mCreateStatus</a> *   </td></tr>
<tr>
<td>cbParams </td><td><p class="starttd"><a class="el" href="struct_fvid2___cb_params.html" title="FVID2 callback parameters that are setup during Fvid2_create(). ">Fvid2_CbParams</a> *</p>
<p>When <a class="el" href="struct_fvid2___cb_params.html#abf28592232eeb93aec80045f312cd12a">Fvid2_CbParams.cbFxn</a> is set, <a class="el" href="struct_fvid2___cb_params.html#abf28592232eeb93aec80045f312cd12a">Fvid2_CbParams.cbFxn</a> gets called for every request completion.</p>
<p class="endtd"></p>
</td></tr>
</table>
<a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#ga70385ba792f5870018ee2f3ce413f3c1">Fvid2_Handle</a> returned by <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#ga1b6ddf776c756c47b7a6adcda5d2dc29" title="Creates the driver identified by the driver ID. ">Fvid2_create()</a> is used in subsequent FVID2 APIs</li>
<li><b> Deleting the driver </b> - <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#ga9da431a59e7ced66bead6ea6ec27fc7c" title="Deletes a previously created FVID2 driver handle. ">Fvid2_delete()</a> <table  border="1">
<tr>
<th>Parameter </th><th>Value  </th></tr>
<tr>
<td>handle </td><td>M2M driver handle  </td></tr>
<tr>
<td>deleteArgs </td><td>NOT USED, set to NULL  </td></tr>
</table>
</li>
<li><p class="startli"><b> Stopping the driver </b> - <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#gaee331b26ea04f78c1d57aaedfd8fa39f" title="An application calls Fvid2_stop to request the video device driver to stop the video display or captu...">Fvid2_stop()</a> </p><table  border="1">
<tr>
<th>Parameter </th><th>Value  </th></tr>
<tr>
<td>handle </td><td>M2M driver handle  </td></tr>
<tr>
<td>cmdArgs </td><td>NOT USED, set to NULL  </td></tr>
</table>
<ul>
<li><b> Controlling the driver </b> - <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#gabd0b991cddc848f77a78b0d652a1847f" title="Send control commands (IOCTLs) to the driver. ">Fvid2_control()</a> <br />
 See <a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___m2_m___v_p_e.html">VPS M2M VPE IOCTL's</a> for the list of IOCTLs supported by the driver.</li>
</ul>
<p class="startli">M2M driver application flow is as follows</p><ul>
<li><b> Init all required modules by calling respective module init functions </b></li>
<li><b> Create driver using <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#ga1b6ddf776c756c47b7a6adcda5d2dc29" title="Creates the driver identified by the driver ID. ">Fvid2_create()</a> </b></li>
<li><b> Set driver specific parameters using <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#gabd0b991cddc848f77a78b0d652a1847f" title="Send control commands (IOCTLs) to the driver. ">Fvid2_control()</a> </b> <br />
 In case of M2M VPE driver, set the VPE parameters using <a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___m2_m___v_p_e.html#gaebfe557d81bbd38c5d530f883b1c972e">IOCTL_VPS_M2M_SET_VPE_PARAMS</a></li>
<li><b> Set Scaler coefficient using <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#gabd0b991cddc848f77a78b0d652a1847f" title="Send control commands (IOCTLs) to the driver. ">Fvid2_control()</a> using <a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_o_m_m_o_n.html#gae55a3c671ee19f98afb06a16d30210b1">IOCTL_VPS_SET_COEFFS</a> </b></li>
<li><b> Allocate DEI context buffers when DEI is enabled using <a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_o_m_m_o_n.html#gaae37a69696307494e72115039ea98d04">IOCTL_VPS_GET_DEI_CTX_INFO</a> and <a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_o_m_m_o_n.html#gace56ad4d4d281a97ecec19761b3528fb">IOCTL_VPS_SET_DEI_CTX_BUF</a> </b></li>
<li><b> Provide frames for processing using <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#gae97f8ae2198d5891ee8511277f40675f" title="An application calls Fvid2_processFrames to submit a video buffer to the video device driver...">Fvid2_processFrames()</a> </b></li>
<li><b> Dequeue processed frame using <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#gaba44221afaaa45005ef0e7baf4c8c2ce" title="An application calls Fvid2_getProcessedFrames to request the video device driver to give ownership of...">Fvid2_getProcessedFrames()</a> </b></li>
<li><b> Stop capture using <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#gaee331b26ea04f78c1d57aaedfd8fa39f" title="An application calls Fvid2_stop to request the video device driver to stop the video display or captu...">Fvid2_stop()</a> and flush the input frames using <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#gaba44221afaaa45005ef0e7baf4c8c2ce" title="An application calls Fvid2_getProcessedFrames to request the video device driver to give ownership of...">Fvid2_getProcessedFrames()</a> </b></li>
<li><b> Free the DEI context buffers when DEI is enabled using <a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_o_m_m_o_n.html#gaae37a69696307494e72115039ea98d04">IOCTL_VPS_GET_DEI_CTX_INFO</a> and <a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_o_m_m_o_n.html#ga60c42f911c2231fa1df4cc0e0dae1361">IOCTL_VPS_GET_DEI_CTX_BUF</a> </b></li>
<li><b> Delete M2M driver using <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#ga9da431a59e7ced66bead6ea6ec27fc7c" title="Deletes a previously created FVID2 driver handle. ">Fvid2_delete()</a> </b></li>
<li><b> De-Init modules by calling respective module de-init functions </b> </li>
</ul>
</li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga7fb579f1bce44f40a3ebe68fbc64b851"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void VpsM2mCreateParams_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_vps___m2m_create_params.html">Vps_M2mCreateParams</a> *&#160;</td>
          <td class="paramname"><em>createPrms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="struct_vps___m2m_create_params.html" title="M2M create parameter structure to be passed to the driver at the time of mem to mem driver create cal...">Vps_M2mCreateParams</a> structure init function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">createPrms</td><td>[IN] Pointer to <a class="el" href="struct_vps___m2m_create_params.html" title="M2M create parameter structure to be passed to the driver at the time of mem to mem driver create cal...">Vps_M2mCreateParams</a> structure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<hr size="1"><small>
Copyright  2019, Texas Instruments Incorporated</small>
</body>
</html>
