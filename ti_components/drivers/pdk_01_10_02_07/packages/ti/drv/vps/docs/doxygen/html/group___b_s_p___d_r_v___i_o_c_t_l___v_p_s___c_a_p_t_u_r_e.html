<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>VPS Capture IOCTL&#39;s</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="../tilogo.gif"></a></td>
  <td bgcolor="red"><img src="../titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.9 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">VPS Capture IOCTL's<div class="ingroups"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l.html">VPS - All IOCTL's</a> &raquo; <a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s.html">VPS IOCTL's</a><a class="el" href="group___b_s_p___d_r_v___v_p_s___a_p_i.html">VPS Driver API</a> &raquo;  &#124; <a class="el" href="group___b_s_p___d_r_v___v_p_s___c_a_p_t_u_r_e___a_p_i.html">Capture API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e___d_s_s_w_b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e___d_s_s_w_b.html">DSSWB Capture IOCTL's</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e___i_s_s"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e___i_s_s.html">ISS Based Capture IOCTL's</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e___v_i_p"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e___v_i_p.html">VIP Capture IOCTL's</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga69684cccfcff40b546593d5354b1648f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e.html#ga69684cccfcff40b546593d5354b1648f">IOCTL_VPS_CAPT_SET_FRAME_SKIP</a>&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0000U)</td></tr>
<tr class="memdesc:ga69684cccfcff40b546593d5354b1648f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set frame skip info.  <a href="#ga69684cccfcff40b546593d5354b1648f">More...</a><br /></td></tr>
<tr class="separator:ga69684cccfcff40b546593d5354b1648f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga623c1bfc50e631253f7ae1320328f1ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e.html#ga623c1bfc50e631253f7ae1320328f1ef">IOCTL_VPS_CAPT_GET_STATUS</a>&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0001U)</td></tr>
<tr class="memdesc:ga623c1bfc50e631253f7ae1320328f1ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get capture status IOCTL.  <a href="#ga623c1bfc50e631253f7ae1320328f1ef">More...</a><br /></td></tr>
<tr class="separator:ga623c1bfc50e631253f7ae1320328f1ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1a358a6564459a9dc1cab7f00e124226"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e.html#ga1a358a6564459a9dc1cab7f00e124226">IOCTL_VPS_CAPT_GET_CH_STATUS</a>&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0002U)</td></tr>
<tr class="memdesc:ga1a358a6564459a9dc1cab7f00e124226"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get channel status.  <a href="#ga1a358a6564459a9dc1cab7f00e124226">More...</a><br /></td></tr>
<tr class="separator:ga1a358a6564459a9dc1cab7f00e124226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga61102c2b8ea1c1d82b312f2b57893e20"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e.html#ga61102c2b8ea1c1d82b312f2b57893e20">IOCTL_VPS_CAPT_FLUSH</a>&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0003U)</td></tr>
<tr class="memdesc:ga61102c2b8ea1c1d82b312f2b57893e20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush capture driver and dequeue all frames including those that are not captured.  <a href="#ga61102c2b8ea1c1d82b312f2b57893e20">More...</a><br /></td></tr>
<tr class="separator:ga61102c2b8ea1c1d82b312f2b57893e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b266d04e45d940f09940ab52ad5c6d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e.html#ga4b266d04e45d940f09940ab52ad5c6d3">IOCTL_VPS_CAPT_REGISTER_OVF_INTR</a>&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0004U)</td></tr>
<tr class="memdesc:ga4b266d04e45d940f09940ab52ad5c6d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable overflow interrupt.  <a href="#ga4b266d04e45d940f09940ab52ad5c6d3">More...</a><br /></td></tr>
<tr class="separator:ga4b266d04e45d940f09940ab52ad5c6d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f27781c0f23d8b9d493e5f0ab218e75"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e.html#ga5f27781c0f23d8b9d493e5f0ab218e75">IOCTL_VPS_CAPT_UNREGISTER_OVF_INTR</a>&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0005U)</td></tr>
<tr class="memdesc:ga5f27781c0f23d8b9d493e5f0ab218e75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable overflow interrupt. This can be used to un-register from the overflow interrupt. Once this is used, there will be no interrupts for overflow.  <a href="#ga5f27781c0f23d8b9d493e5f0ab218e75">More...</a><br /></td></tr>
<tr class="separator:ga5f27781c0f23d8b9d493e5f0ab218e75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18e99c64bf9a88aab6e35b9fef1dbd3f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e.html#ga18e99c64bf9a88aab6e35b9fef1dbd3f">IOCTL_VPS_CAPT_CHECK_OVERFLOW</a>&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0006U)</td></tr>
<tr class="memdesc:ga18e99c64bf9a88aab6e35b9fef1dbd3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check overflow.  <a href="#ga18e99c64bf9a88aab6e35b9fef1dbd3f">More...</a><br /></td></tr>
<tr class="separator:ga18e99c64bf9a88aab6e35b9fef1dbd3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>VIP capture specific IOCTLs are as below</p>
<ul>
<li><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_a_p_t_u_r_e___v_i_p.html">VIP Capture IOCTL's</a></li>
</ul>
<p>In addition to the IOCTLs listed above the following common IOCTLs are applicable to this driver</p>
<ul>
<li><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___f_v_i_d2.html#gac5b26d84ff28473c455e6e885fe473cb">FVID2_START</a></li>
<li><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___f_v_i_d2.html#ga12409aa78d3ea5321cec9857fd91ae75">FVID2_STOP</a></li>
<li><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___c_o_m_m_o_n.html#gaf7b6225091019acea1d26cfa01171b4d">IOCTL_VPS_REGISTER_TIMESTAMP_FXN</a> </li>
</ul>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga18e99c64bf9a88aab6e35b9fef1dbd3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IOCTL_VPS_CAPT_CHECK_OVERFLOW&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0006U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check overflow. </p>
<p>This interrupt can be used to check the overflow in a particular VIP instance Structure passed will be filled with appropriate values</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmdArgs</td><td>NULL </td></tr>
    <tr><td class="paramname">cmdArgsStatus</td><td>[OUT] <a class="el" href="struct_vps___capt_overflow_check_params.html" title="Capture overflow parameters, will be filled by the driver during check for overflow. This structure is required to send to driver by application to get the status of overflow. ">Vps_CaptOverflowCheckParams</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FVID2_SOK on success, else failure. </dd></dl>

</div>
</div>
<a class="anchor" id="ga61102c2b8ea1c1d82b312f2b57893e20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IOCTL_VPS_CAPT_FLUSH&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0003U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush capture driver and dequeue all frames including those that are not captured. </p>
<p>Note: This IOCTL is not yet implemented!!</p>
<p>This API can be called only when driver is in stopped state. Driver is in stopped state when,</p><ul>
<li>FIVD2_stop() is called</li>
<li><a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#ga1b6ddf776c756c47b7a6adcda5d2dc29" title="Creates the driver identified by the driver ID. ">Fvid2_create()</a> is called and <a class="el" href="group___b_s_p___d_r_v___f_v_i_d2___a_p_i.html#ga0345d6a47c9b678cccde6a8b4c8660cd" title="An application calls Fvid2_start to request the video device driver to start the video display or cap...">Fvid2_start()</a> is not called.</li>
</ul>
<p>This will return frames from all streams for a given capture handle. If this IOCTL is called with global handle then this will return frames from all capture handles.</p>
<p>Since maximum FVID2_MAX_FRAME_PTR frames can be returned at a time. This function should be called in a loop until <a class="el" href="struct_fvid2___frame_list.html#a7ddb68bc95087032739409a5a2cb97c8">Fvid2_FrameList.numFrames</a> = 0 is returned or the return value is FVID2_ENO_MORE_BUFFERS in order to get back all the frames from the capture driver.</p>
<p>In case capture is in running state this function will return error.</p>
<p>This IOCTL will return capture frames, non-captured frames, as well as all frames held inside the hardware.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmdArgs</td><td>[IN] NULL </td></tr>
    <tr><td class="paramname">cmdArgsStatus</td><td>[OUT] <a class="el" href="struct_fvid2___frame_list.html" title="FVID2 frame buffer list used to exchange multiple FVID2 frames in a single driver call...">Fvid2_FrameList</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FVID2_SOK on success, FVID2_ENO_MORE_BUFFERS if all buffers are returned, other error values on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1a358a6564459a9dc1cab7f00e124226"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IOCTL_VPS_CAPT_GET_CH_STATUS&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0002U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get channel status. </p>
<p>This IOCTL can be used to get status about a specific channel, stream.</p>
<p>This control can be done independently for each stream, channel.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmdArgs</td><td>[IN] const <a class="el" href="struct_vps___capt_ch_status_args.html" title="Capture Channel Get Status IOCTL input arguments. ">Vps_CaptChStatusArgs</a> * </td></tr>
    <tr><td class="paramname">cmdArgsStatus</td><td>[OUT] <a class="el" href="struct_vps___capt_ch_status.html" title="Capture Channel Get Status IOCTL result. ">Vps_CaptChStatus</a> *</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FVID2_SOK on success, else failure. </dd></dl>

</div>
</div>
<a class="anchor" id="ga623c1bfc50e631253f7ae1320328f1ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IOCTL_VPS_CAPT_GET_STATUS&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0001U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get capture status IOCTL. </p>
<p>This IOCTL can be used to get the capture status like number of frames queued/dequeued. Note: These counters will be reset either at the time of driver create or while starting the capture operation. See respective counter comments for details.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmdArgs</td><td>[OUT] <a class="el" href="struct_vps___capt_status.html" title="Capture status structure used to get the current status. ">Vps_CaptStatus</a> * </td></tr>
    <tr><td class="paramname">cmdArgsStatus</td><td>[OUT] NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FVID2_SOK on success, else failure </dd></dl>

</div>
</div>
<a class="anchor" id="ga4b266d04e45d940f09940ab52ad5c6d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IOCTL_VPS_CAPT_REGISTER_OVF_INTR&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0004U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable overflow interrupt. </p>
<p>This IOCTL can be used to enable the overflow interrupts from the hardware The overflow params structure contains the application callback function when the interrupt occurs. The other parameter is the application instance object of the calling VIP instance</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmdArgs</td><td>[IN] const <a class="el" href="struct_vps___capt_overflow_params.html" title="Capture overflow parameter structure. ">Vps_CaptOverflowParams</a> * </td></tr>
    <tr><td class="paramname">cmdArgsStatus</td><td>NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FVID2_SOK on success, else failure. </dd></dl>

</div>
</div>
<a class="anchor" id="ga69684cccfcff40b546593d5354b1648f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IOCTL_VPS_CAPT_SET_FRAME_SKIP&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0000U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set frame skip info. </p>
<p>This IOCTL can be used to control capture frame drop sequence, Example, this IOCTL can be used to convert 60fps input source to 30fps by dropping frames.</p>
<p>This control can be done independently for each stream, channel and is supported only when VPS_CAPT_BCM_FRM_DROP is selected as buffer capture mode (bufCaptMode).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmdArgs</td><td>[IN] const <a class="el" href="struct_vps___capt_frame_skip.html" title="Frame Skip parameters. Not all interface support this, please refer interface specific header...">Vps_CaptFrameSkip</a> * </td></tr>
    <tr><td class="paramname">cmdArgsStatus</td><td>[OUT] NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FVID2_SOK on success, else failure. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5f27781c0f23d8b9d493e5f0ab218e75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IOCTL_VPS_CAPT_UNREGISTER_OVF_INTR&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#gaf0b742ceeb9f6cd71f01c274de3d7e9b">VPS_CAPT_IOCTL_BASE</a> + 0x0005U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable overflow interrupt. This can be used to un-register from the overflow interrupt. Once this is used, there will be no interrupts for overflow. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmdArgs</td><td>[IN] NULL </td></tr>
    <tr><td class="paramname">cmdArgsStatus</td><td>NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FVID2_SOK on success, else failure. </dd></dl>

</div>
</div>
</div><!-- contents -->
<hr size="1"><small>
Copyright  2019, Texas Instruments Incorporated</small>
</body>
</html>
