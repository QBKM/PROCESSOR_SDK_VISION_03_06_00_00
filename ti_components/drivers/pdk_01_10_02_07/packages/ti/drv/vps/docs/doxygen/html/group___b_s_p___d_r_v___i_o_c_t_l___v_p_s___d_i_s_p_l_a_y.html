<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>BSP_DRV_IOCTL_VPS_DISPLAY</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="../tilogo.gif"></a></td>
  <td bgcolor="red"><img src="../titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.9 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">BSP_DRV_IOCTL_VPS_DISPLAY<div class="ingroups"><a class="el" href="group___b_s_p___d_r_v___v_p_s___a_p_i.html">VPS Driver API</a> &raquo; <a class="el" href="group___b_s_p___d_r_v___v_p_s___d_i_s_p_l_a_y___a_p_i.html">Display API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___d_i_s_p_l_a_y___d_s_s"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___d_i_s_p_l_a_y___d_s_s.html">DSS Display IOCTL's</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga7bd45fae3dce1168bfdfccb8ac872d35"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___d_i_s_p_l_a_y.html#ga7bd45fae3dce1168bfdfccb8ac872d35">IOCTL_VPS_DISP_GET_STATUS</a>&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#ga1e3ca76027f33a4d0b70fbe54647b265">VPS_DISP_IOCTL_BASE</a> + 0x0001U)</td></tr>
<tr class="memdesc:ga7bd45fae3dce1168bfdfccb8ac872d35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get display status IOCTL.  <a href="#ga7bd45fae3dce1168bfdfccb8ac872d35">More...</a><br /></td></tr>
<tr class="separator:ga7bd45fae3dce1168bfdfccb8ac872d35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa0c230b019d92e5851e9f8fa162580e1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___d_i_s_p_l_a_y.html#gaa0c230b019d92e5851e9f8fa162580e1">IOCTL_VPS_DISP_REGISTER_BUF_PRGM_CB</a>&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#ga1e3ca76027f33a4d0b70fbe54647b265">VPS_DISP_IOCTL_BASE</a> + 0x0002U)</td></tr>
<tr class="memdesc:gaa0c230b019d92e5851e9f8fa162580e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register buffer program callback function IOCTL.  <a href="#gaa0c230b019d92e5851e9f8fa162580e1">More...</a><br /></td></tr>
<tr class="separator:gaa0c230b019d92e5851e9f8fa162580e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga83e382dacd98055d70528eaa04a9bccd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_s_p___d_r_v___i_o_c_t_l___v_p_s___d_i_s_p_l_a_y.html#ga83e382dacd98055d70528eaa04a9bccd">IOCTL_VPS_DISP_BYPASS_LOW_LATENCY_CHECK</a>&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#ga1e3ca76027f33a4d0b70fbe54647b265">VPS_DISP_IOCTL_BASE</a> + 0x0003U)</td></tr>
<tr class="memdesc:ga83e382dacd98055d70528eaa04a9bccd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bypass low latency check IOCTL.  <a href="#ga83e382dacd98055d70528eaa04a9bccd">More...</a><br /></td></tr>
<tr class="separator:ga83e382dacd98055d70528eaa04a9bccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga83e382dacd98055d70528eaa04a9bccd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IOCTL_VPS_DISP_BYPASS_LOW_LATENCY_CHECK&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#ga1e3ca76027f33a4d0b70fbe54647b265">VPS_DISP_IOCTL_BASE</a> + 0x0003U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bypass low latency check IOCTL. </p>
<p>This IOCTL can be used to bypass the low latency check before programming the buffer to the hardware.</p>
<p>In order to support low latency display, the display driver provides a mechanism to program the buffer address in the Fivd2_queue() context. This will ensure that the recently given buffer is programmed directly in to the hardware register without waiting for the next VSYNC interrupt.</p>
<p>To avoid race condition between the hardware VSYNC occurring and the driver programming the buffer at the same time, the driver generally checks that the actual programming of the register is not near the VSYNC period. For this, the driver makes use of the current line count (relative to previous VSYNC) of the DSS hardware. But this hardware feature is not present for all the overlays/VENC. For example, for DSS LCD2 and LCD3, this feature is not present. Hence for these overlays, low latency display can't be supported using the above line check feature.</p>
<p>In order to work around this hardware limitation, the driver can bypass this "queue not near to VSYNC" check and let the application do this check using timestamp with respect to last VSYNC and the expected display FPS. To do so, application can check just before driver queue, that it is not near the (VSYNC period - 2 ms) and then queue the frame. From this point to the actual register programming takes less that 1 ms for the driver if no context switching happens. To ensure this the display task can be made the highest task in the system and other HWI events which take more than safe period (in this case 2ms).</p>
<p>This IOCTL is per display driver instance and hence should be called separately for each display pipeline.</p>
<p>Also this IOCTL should be called before starting the display.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmdArgs</td><td>[OUT] const <a class="el" href="struct_vps___disp_bypass_low_latency_check_params.html" title="Display buffer program callback parameter structure. ">Vps_DispBypassLowLatencyCheckParams</a> * </td></tr>
    <tr><td class="paramname">cmdArgsStatus</td><td>[OUT] NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FVID2_SOK on success, else failure </dd></dl>

</div>
</div>
<a class="anchor" id="ga7bd45fae3dce1168bfdfccb8ac872d35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IOCTL_VPS_DISP_GET_STATUS&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#ga1e3ca76027f33a4d0b70fbe54647b265">VPS_DISP_IOCTL_BASE</a> + 0x0001U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get display status IOCTL. </p>
<p>This IOCTL can be used to get the display status like number of frames displayed, number of frames repeated, number of frames queued/dequeued. Note: These counters will be reset either at the time of driver create or while starting the display operation. See respective counter comments for details.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmdArgs</td><td>[OUT] <a class="el" href="struct_vps___disp_status.html" title="Display status structure used to get the current status. ">Vps_DispStatus</a> * </td></tr>
    <tr><td class="paramname">cmdArgsStatus</td><td>[OUT] NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FVID2_SOK on success, else failure </dd></dl>

</div>
</div>
<a class="anchor" id="gaa0c230b019d92e5851e9f8fa162580e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IOCTL_VPS_DISP_REGISTER_BUF_PRGM_CB&#160;&#160;&#160;(<a class="el" href="group___b_s_p___d_r_v___v_p_s___c_o_m_m_o_n___a_p_i.html#ga1e3ca76027f33a4d0b70fbe54647b265">VPS_DISP_IOCTL_BASE</a> + 0x0002U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register buffer program callback function IOCTL. </p>
<p>This IOCTL can be used to register a callback when the actual buffer is getting programmed to the hardware. See <a class="el" href="group___b_s_p___d_r_v___v_p_s___d_i_s_p_l_a_y___a_p_i.html#ga7a3608f8f4ea2a8d886769ba860897a7" title="Display driver buffer program callback function prototype. ">Vps_DispBufPrgmCbFxn</a> for details.</p>
<p>This IOCTL is per display driver instance and hence should be called separately for each display pipeline.</p>
<p>Also this IOCTL should be called before starting the display.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmdArgs</td><td>[OUT] const <a class="el" href="struct_vps___disp_buf_prgm_cb_fxn_params.html" title="Display buffer program callback parameter structure. ">Vps_DispBufPrgmCbFxnParams</a> * </td></tr>
    <tr><td class="paramname">cmdArgsStatus</td><td>[OUT] NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FVID2_SOK on success, else failure </dd></dl>

</div>
</div>
</div><!-- contents -->
<hr size="1"><small>
Copyright  2019, Texas Instruments Incorporated</small>
</body>
</html>
